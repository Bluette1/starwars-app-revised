{"version":3,"sources":["components/me.tsx","auth-link.ts","components/people.tsx","hooks/usePeopleContent.ts","components/back-btn.tsx","components/favourite.tsx","components/person.tsx","components/star-wars-logo.svg","components/header.tsx","routes.tsx","components/register-button.tsx","components/login-form.tsx","components/login-button.tsx","components/register-form.tsx","public-routes.js","index.tsx","cache.ts","components/link-item.tsx","hooks/useFavourites.ts","components/heart-red.png"],"names":["Me","Component","authLink","setContext","_","headers","token","localStorage","getItem","authorization","Page","React","lazy","PEOPLE_QUERY","gql","MY_PEOPLE_QUERY","compose","graphql","name","options","context","variables","page","pageData","myPeopleData","error","console","log","loading","peopleVar","setFavourites","useFavourites","favouritePeopleVar","getPeople","currPg","parseInt","currentPage","people","setPeople","pge","currPeople","setItem","JSON","stringify","favouritePeople","myPeople","forEach","person","push","fallback","refetch","BackBtn","style","textAlign","className","type","onClick","window","location","href","Favourite","role","src","heartred","alt","PERSON_QUERY","Person","searchParams","isInFavourites","parsedParams","QueryString","parse","search","favourite","useQuery","data","personDetails","height","gender","homeworld","eyeColor","hairColor","skinColor","films","species","vehicles","starships","url","textDecoration","target","rel","getId","map","film","link","uuid","thisSpecies","vehicle","starship","Header","logo","width","margin","display","Routes","exact","path","component","People","RegisterButton","to","LOGIN_USER","LoginForm","history","useHistory","useMutation","onCompleted","login","id","isLoggedInVar","reload","alert","mutation","inFlight","err","htmlFor","value","e","preventDefault","email","document","getElementById","password","LoginButton","REGISTER_USER","RegisterForm","signup","registerUser","typeDefs","client","ApolloClient","cache","uri","resolvers","IS_LOGGED_IN","IsLoggedIn","content","isLoggedIn","ReactDOM","render","StrictMode","makeVar","retrieveStorage","varName","peopleObj","resultPg","getPage","InMemoryCache","typePolicies","Query","fields","read","currPage","favourites","peopleCurrent","splitArray","split","length","LinkItem","getFavourites","deleteFavourite","filter","currName","addFavourite","isFavourite","includes"],"mappings":"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","file":"static/js/main.915803c1.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\nexport class Me extends Component {\n  render() {\n    return <div>Me View</div>;\n  }\n}\n\nexport default Me;\n","import { setContext } from '@apollo/client/link/context';\n\nconst authLink = setContext((_, { headers }) => {\n  // get the authentication token from local storage if it exists\n  const token = localStorage.getItem('token');\n  // return the headers to the context so httpLink can read them\n  return {\n    headers: {\n      ...headers,\n      authorization: token ? `Bearer ${token}` : '',\n    },\n  };\n});\n\nexport default authLink;\n","import React, { Suspense } from 'react';\nimport { gql } from '@apollo/client';\nimport { graphql } from '@apollo/client/react/hoc';\nimport { compose } from 'recompose';\nimport PropTypes from 'prop-types';\nimport { favouritePeopleVar, peopleVar } from '../cache';\nimport authLink from '../auth-link';\nimport usePeopleContent from '../hooks/usePeopleContent';\nimport useFavourites from '../hooks/useFavourites';\n\nconst Page = React.lazy(() => import('./page'));\nconst PEOPLE_QUERY = gql`\n  query People($page: Int) {\n    people(page: $page) {\n      name\n      height\n      gender\n      homeworld\n    }\n  }\n`;\n\nconst MY_PEOPLE_QUERY = gql`\n  query MyPeople {\n    myPeople {\n      name\n    }\n  }\n`;\n\nconst People = ({\n  pageData,\n  myPeopleData,\n}) => {\n  if (pageData.error || myPeopleData.error) {\n    console.log('Error while getting data');\n    return null;\n  }\n  if (\n    pageData.loading\n    || myPeopleData.loading) {\n    return <p>Loading...</p>;\n  }\n\n  const {\n    setFavourites,\n  } = useFavourites(favouritePeopleVar);\n\n  const { getPeople, setPeople } = usePeopleContent(peopleVar);\n\n  setPeople(1, pageData.people);\n\n  const favouritePeople: string[] = [];\n  const { myPeople } = myPeopleData;\n  myPeople.forEach((person) => favouritePeople.push(person.name));\n  setFavourites(favouritePeople);\n  return (\n    <Suspense fallback={<p>Loading...</p>}>\n      <Page\n        refetch={pageData.refetch}\n        setPeople={setPeople}\n        getPeople={getPeople}\n      />\n    </Suspense>\n  );\n};\n\nexport default compose(\n  graphql(MY_PEOPLE_QUERY, {\n    name: 'myPeopleData',\n    options: {\n      context: authLink,\n    },\n  }),\n  graphql(PEOPLE_QUERY, {\n    name: 'pageData',\n    options: {\n      context: authLink,\n      variables: {\n        page: 1,\n      },\n    },\n  }),\n)(People);\n\nPeople.propTypes = {\n  pageData: PropTypes.objectOf(PropTypes.any).isRequired,\n  myPeopleData: PropTypes.objectOf(PropTypes.any).isRequired,\n};\n","import { ReactiveVar } from '@apollo/client';\nimport { currentPage } from '../cache';\n\nexport default function usePeopleContent(peopleVar: ReactiveVar<Object>) {\n  const getPeople = () => {\n    const currPg = parseInt(currentPage(), 10);\n    const people = peopleVar();\n    if (people[currPg]) {\n      return people[currPg];\n    }\n    return [];\n  };\n  const setPeople = (pge, people) => {\n    const currPeople = peopleVar();\n    currPeople[pge] = people;\n    localStorage.setItem('peopleData', JSON.stringify(currPeople) as string);\n    peopleVar(currPeople);\n  };\n  return {\n    getPeople, setPeople,\n  };\n}\n","import React from 'react';\n\nexport default function BackBtn() {\n  return (\n    <div style={{ textAlign: 'center' }}>\n      <button\n        className=\"btn btn-secondary\"\n        type=\"submit\"\n        onClick={() => {\n          window.location.href = '/';\n        }}\n      >\n        Back\n      </button>\n    </div>\n  );\n}\n","import React from 'react';\nimport heartred from './heart-red.png';\n\nexport default function Favourite() {\n  return (\n    <div className=\"d-flex m-md-0 m-1\">\n      Is a favourite:&nbsp;\n      <img\n        className=\"mt-n2\"\n        role=\"presentation\"\n        src={heartred}\n        alt=\"Like icon\"\n      />\n    </div>\n  );\n}\n","import React from 'react';\nimport uuid from 'react-uuid';\nimport QueryString from 'query-string';\nimport { gql, useQuery } from '@apollo/client';\nimport PropTypes from 'prop-types';\nimport { LinkItem, getId } from './link-item';\nimport authLink from '../auth-link';\nimport BackBtn from './back-btn';\nimport Favourite from './favourite';\n\nconst PERSON_QUERY = gql`\n  query PersonDetails($name: String!) {\n    personDetails(name: $name) {\n      name\n      height\n      gender\n      homeworld\n      eyeColor\n      hairColor\n      skinColor\n      films\n      species\n      vehicles\n      starships\n      url\n    }\n  }\n`;\n\nconst Person = ({ location: searchParams }) => {\n  let isInFavourites = false;\n  const parsedParams = QueryString.parse(searchParams.search);\n  const { search, favourite } = parsedParams;\n  if (favourite) {\n    isInFavourites = true;\n  }\n\n  const { loading, error, data } = useQuery(PERSON_QUERY, {\n    variables: { name: search },\n    context: authLink,\n  });\n\n  if (loading) return <p>Loading...</p>;\n  if (error) return <p>{`Error :( ${error}`}</p>;\n\n  const {\n    name,\n    height,\n    gender,\n    homeworld,\n    eyeColor,\n    hairColor,\n    skinColor,\n    films,\n    species,\n    vehicles,\n    starships,\n    url,\n  } = data.personDetails;\n\n  return (\n    <div className=\"pt-5 mb-3\">\n      <BackBtn />\n\n      <div className=\"d-md-flex justify-content-md-between\">\n        <h1 className=\"display-4 my-5\">\n          <span className=\"text-dark\">Name: </span>\n          {name}\n        </h1>\n        <div className=\"p-md-5\">{isInFavourites ? <Favourite /> : null}</div>\n      </div>\n      <h4 className=\"mb-3\">Person Details</h4>\n      <p>\n        Height:&nbsp;\n        {height}\n      </p>\n      <p>\n        Gender:&nbsp;\n        {gender}\n      </p>\n      <p>\n        Homeworld:&nbsp;Planet ID No&nbsp;\n        <a style={{ textDecoration: 'underline' }} href={homeworld} target=\"_blank\" rel=\"noopener noreferrer\">{getId(homeworld)}</a>\n      </p>\n      <ul className=\"list-group\">\n        <li className=\"list-group-item\">\n          Eye color:&nbsp;\n          {eyeColor}\n        </li>\n        <li className=\"list-group-item\">\n          Hair color:&nbsp;\n          {hairColor}\n        </li>\n        <li className=\"list-group-item\">\n          Skin color:&nbsp;\n          {skinColor}\n        </li>\n      </ul>\n      <h4 className=\"my-3\">More details</h4>\n      <ul className=\"list-group\">\n        <li className=\"list-group-item\">\n          Film IDs:&nbsp;\n          {films.map((film) => (\n            <LinkItem key={`film-${uuid()}`} link={film} />\n          ))}\n        </li>\n        <li className=\"list-group-item\">\n          Species IDs:&nbsp;\n          {species.map((thisSpecies) => (\n            <LinkItem key={`species-${uuid()}`} link={thisSpecies} />\n          ))}\n        </li>\n        <li className=\"list-group-item\">\n          Vehicles IDs:&nbsp;\n          {vehicles.map((vehicle) => (\n            <LinkItem key={`vehicle-${uuid()}`} link={vehicle} />\n          ))}\n        </li>\n\n        <li className=\"list-group-item\">\n          Starship IDs:&nbsp;\n          {starships.map((starship) => (\n            <LinkItem key={`vehicle-${uuid()}`} link={starship} />\n          ))}\n        </li>\n      </ul>\n      <h4 className=\"mb-3\">\n        Person Url:&nbsp;\n        <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{url}</a>\n      </h4>\n      <hr />\n      <BackBtn />\n    </div>\n  );\n};\n\nPerson.propTypes = {\n  location: PropTypes.objectOf(PropTypes.any).isRequired,\n};\n\nexport default Person;\n","export default __webpack_public_path__ + \"static/media/star-wars-logo.057103d6.svg\";","import React from 'react';\nimport logo from './star-wars-logo.svg';\nimport '../css/header.css';\n\nfunction Header() {\n  return (\n    <div className=\"header\">\n      <img\n        src={logo}\n        alt=\"StarWars\"\n        style={{ width: '300px', margin: 'auto', display: 'block' }}\n      />\n    </div>\n  );\n}\n\nexport default Header;\n","import React, { Component } from 'react';\nimport { Route } from 'react-router-dom';\nimport Me from './components/me';\nimport People from './components/people';\nimport Person from './components/person';\nimport Header from './components/header';\n\nexport class Routes extends Component {\n  render() {\n    return (\n      <div>\n        <Header />\n        <Route exact path=\"/me\" component={Me} />\n        <Route exact path=\"/\" component={People} />\n        <Route exact path=\"/people\" component={People} />\n        <Route exact path=\"/person\" component={Person} />\n      </div>\n    );\n  }\n}\n\nexport default Routes;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst RegisterButton = () => (\n  <Link to=\"/register\" className=\"btn btn-secondary\">Register</Link>\n);\n\nexport default RegisterButton;\n","import React, { Fragment } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { gql, useMutation } from '@apollo/client';\nimport RegisterButton from './register-button';\nimport { isLoggedInVar } from '../cache';\n\nexport const LOGIN_USER = gql`\n  mutation Login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      id\n      token\n    }\n  }\n`;\n\nconst LoginForm = () => {\n  const history = useHistory();\n  const [mutation, { loading: inFlight, error: err }] = useMutation(\n    LOGIN_USER,\n    {\n      onCompleted: ({ login }) => {\n        if (login) {\n          localStorage.setItem('token', login.token as string);\n          localStorage.setItem('userId', login.id as string);\n          isLoggedInVar(true);\n          history.push('/');\n          window.location.reload();\n        } else {\n          alert('Login failed. Please register first before trying to login.');\n        }\n      },\n    },\n  );\n\n  if (inFlight) return <h4>Loading...</h4>;\n  if (err) return <p>An error occurred</p>;\n\n  return (\n    <div className=\"row m-md-0 m-5 d-flex justify-content-center form mt-5 pb-5\">\n      <div className=\"col-md-3\">\n        <h4 className=\"ml-n3\">Login</h4>\n\n        <>\n          <form id=\"login\" className=\"d-flex flex-column\">\n            <label htmlFor=\"email\" className=\"row d-flex flex-column\">\n              Email:\n              <input\n                className=\"col-md-10\"\n                type=\"email\"\n                name=\"email\"\n                id=\"email\"\n              />\n            </label>\n            <label htmlFor=\"password\" className=\"row mb-3 mt-3\">\n              Password:\n              <input\n                className=\"col-md-10\"\n                type=\"password\"\n                name=\"password\"\n                id=\"password\"\n              />\n            </label>\n            <input\n              type=\"submit\"\n              value=\"Submit\"\n              className=\"form-elements btn btn-secondary\"\n              onClick={(e) => {\n                e.preventDefault();\n                const email = document.getElementById(\n                  'email',\n                ) as HTMLInputElement;\n                const password = document.getElementById(\n                  'password',\n                ) as HTMLInputElement;\n                mutation({\n                  variables: {\n                    email: email.value,\n                    password: password.value,\n                  },\n                });\n              }}\n            />\n          </form>\n        </>\n        <RegisterButton />\n      </div>\n    </div>\n  );\n};\n\nexport default LoginForm;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst LoginButton = () => (\n  <Link to=\"/login\" className=\"btn btn-secondary\">Login</Link>\n);\n\nexport default LoginButton;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { gql, useMutation } from '@apollo/client';\nimport { isLoggedInVar } from '../cache';\nimport LoginButton from './login-button';\n\nexport const REGISTER_USER = gql`\n  mutation Signup($email: String!, $password: String!, $name: String!) {\n    signup(email: $email, password: $password, name: $name) {\n      id\n      token\n    }\n  }\n`;\n\nexport default function RegisterForm() {\n  const history = useHistory();\n  const [registerUser, { loading, error }] = useMutation(REGISTER_USER, {\n    onCompleted: ({ signup }) => {\n      if (signup) {\n        localStorage.setItem('token', signup.token as string);\n        localStorage.setItem('userId', signup.id as string);\n        isLoggedInVar(true);\n        history.push('/');\n        window.location.reload();\n      }\n    },\n  });\n  if (loading) return <h4>Loading...</h4>;\n  if (error) return <p>An error occurred</p>;\n\n  return (\n    <div className=\"row m-md-0 m-5 d-flex justify-content-center form mt-5 pb-5\">\n      <div className=\"col-md-3\">\n        <h4 className=\"ml-n3\">Register</h4>\n\n        <>\n          <form id=\"login\" className=\"d-flex flex-column\">\n            <label htmlFor=\"email\" className=\"row d-flex flex-column\">\n              <p>Email:</p>\n              <input\n                className=\"col-md-10\"\n                type=\"email\"\n                name=\"email\"\n                id=\"email\"\n              />\n            </label>\n            <label\n              htmlFor=\"password\"\n              className=\"row d-flex flex-column mb-3 mt-3\"\n            >\n              <p>Password:</p>\n              <input\n                className=\"col-md-10\"\n                type=\"password\"\n                name=\"password\"\n                id=\"password\"\n              />\n            </label>\n            <label\n              htmlFor=\"password\"\n              className=\"row d-flex flex-column mb-3 mt-3\"\n            >\n              <p>Confirm password:</p>\n              <input\n                className=\"col-md-10\"\n                type=\"password\"\n                name=\"confirm-password\"\n                id=\"confirm-password\"\n              />\n            </label>\n            <label htmlFor=\"name\" className=\"row d-flex flex-column mb-3 mt-3\">\n              <p>Name:</p>\n              <input className=\"col-md-10\" type=\"text\" name=\"name\" id=\"name\" />\n            </label>\n            <input\n              type=\"submit\"\n              value=\"Submit\"\n              className=\"form-elements btn btn-secondary\"\n              onClick={(e) => {\n                e.preventDefault();\n                const email = document.getElementById(\n                  'email',\n                ) as HTMLInputElement;\n                const password = document.getElementById(\n                  'password',\n                ) as HTMLInputElement;\n                const name = document.getElementById(\n                  'name',\n                ) as HTMLInputElement;\n                registerUser({\n                  variables: {\n                    email: email.value,\n                    password: password.value,\n                    name: name.value,\n                  },\n                });\n              }}\n            />\n          </form>\n        </>\n        <LoginButton />\n      </div>\n    </div>\n  );\n}\n","import React, { Component } from 'react';\nimport { Route } from 'react-router-dom';\nimport LoginForm from './components/login-form';\nimport RegisterForm from './components/register-form';\nimport Header from './components/header';\n\nexport class Routes extends Component {\n  render() {\n    return (\n      <div>\n        <Header />\n        <Route exact path=\"/register\" component={RegisterForm} />\n        <Route exact path=\"/login\" component={LoginForm} />\n      </div>\n    );\n  }\n}\n\nexport default Routes;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, useHistory } from 'react-router-dom';\nimport './css/index.css';\nimport {\n  ApolloClient,\n  NormalizedCacheObject,\n  ApolloProvider,\n  gql,\n  useQuery,\n} from '@apollo/client';\nimport Routes from './routes';\nimport PublicRoutes from './public-routes';\nimport { cache } from './cache';\n\nconst typeDefs = gql`\n  extend type Query {\n    isLoggedIn: Boolean!\n  }\n`;\n\n// Set up our apollo-client to point at the server we created\n// this can be local or a remote endpoint\nconst client: ApolloClient<NormalizedCacheObject> = new ApolloClient({\n  cache,\n  uri: '/graphql',\n  headers: {\n    authorization: localStorage.getItem('token') || '',\n    'client-name': 'Star Wars [web]',\n    'client-version': '1.0.0',\n  },\n  typeDefs,\n  resolvers: {},\n});\n\nconst IS_LOGGED_IN = gql`\n  query IsUserLoggedIn {\n    isLoggedIn @client\n  }\n`;\n\nfunction IsLoggedIn() {\n  const { data } = useQuery(IS_LOGGED_IN);\n  const history = useHistory();\n  let content;\n  if (data.isLoggedIn) {\n    history.push('/');\n    content = <Routes />;\n  } else {\n    history.push('/login');\n    content = <PublicRoutes />;\n  }\n  return content;\n}\n\nReactDOM.render(\n  <ApolloProvider client={client}>\n    <BrowserRouter>\n      <React.StrictMode>\n        <IsLoggedIn />\n      </React.StrictMode>\n    </BrowserRouter>\n  </ApolloProvider>,\n  document.getElementById('root'),\n);\n","import { InMemoryCache, makeVar } from '@apollo/client';\n\nexport const isLoggedInVar = makeVar<boolean>(!!localStorage.getItem('token'));\n\nconst getPage = () => {\n  const page = localStorage.getItem('page');\n  let resultPg = '1';\n  if (page) {\n    resultPg = page;\n  }\n  return resultPg;\n};\n\nconst retrieveStorage = (varName) => {\n  let people;\n  const peopleObj = localStorage.getItem(varName);\n  if (peopleObj) {\n    people = JSON.parse(peopleObj);\n  }\n  return people;\n};\n\nexport const peopleVar = makeVar(retrieveStorage('peopleData') || {});\nexport const favouritePeopleVar = makeVar(retrieveStorage('favourites') || []);\n\nexport const currentPage = makeVar(getPage());\n\nexport const cache: InMemoryCache = new InMemoryCache({\n  typePolicies: {\n    Query: {\n      fields: {\n        isLoggedIn: {\n          read() {\n            return isLoggedInVar();\n          },\n        },\n        currPage: {\n          read() {\n            return currentPage();\n          },\n        },\n        favourites: {\n          read() {\n            return favouritePeopleVar();\n          },\n        },\n        peopleCurrent: {\n          read() {\n            return peopleVar();\n          },\n        },\n      },\n    },\n  },\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport const getId = (url) => {\n  const splitArray = url.split('/');\n  return parseInt(splitArray[splitArray.length - 2], 10);\n};\n\nexport const LinkItem = ({ link }) => (\n  <a style={{ textDecoration: 'underline' }} href={link} target=\"_blank\" rel=\"noreferrer\">\n    {`[${getId(link)}]`}\n  </a>\n);\n\nLinkItem.propTypes = {\n  link: PropTypes.string.isRequired,\n};\n","import { ReactiveVar } from '@apollo/client';\n\nexport default function useFavourites(favouritePeopleVar: ReactiveVar<string[]>) {\n  const getFavourites = favouritePeopleVar();\n  const setFavourites = (favourites) => {\n    localStorage.setItem('favourites', JSON.stringify([...favouritePeopleVar(), ...favourites]) as string);\n    favouritePeopleVar(favourites);\n  };\n  const deleteFavourite = (name) => {\n    const favourites = favouritePeopleVar().filter((currName) => currName !== name);\n    localStorage.setItem('favourites', JSON.stringify(favourites) as string);\n    favouritePeopleVar(favourites);\n  };\n  const addFavourite = (name) => {\n    const favourites = [...favouritePeopleVar(), name];\n    localStorage.setItem('favourites', JSON.stringify(favourites) as string);\n\n    favouritePeopleVar(favourites);\n  };\n  const isFavourite = (name) => {\n    const isInFavourites = name ? favouritePeopleVar().includes(name) : false;\n    return isInFavourites;\n  };\n  return {\n    getFavourites, setFavourites, deleteFavourite, addFavourite, isFavourite,\n  };\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAC6ElEQVRoge3YzWucVRTH8c+ZlBZF6UKkRLpSxKULX8tMXhqKFheVKIiCINnoHyD+AW6jEnTTXVGMom66EAuC1DGZGKKtgi+IqFlpC7VqE0RJjXNdOEobnidP5pl5zMLnuzzn3HN+v7l3LnOHmpqampr/M9FPcZowpmtaOKxrVLgRP+FrnDbi1Wj7dtse426VPI4p3IYbJD9qOC85LTkZHZ2hGkgtdwgvYKKgtCvM2/RMfOjCVT2arhfmhBk0Cvq08XQs+qRIW6GB1DIjHMe+otorOKfrwVhyBlLTnRrexM199NgQnooFr2xXtK2BnvgTfQy9kkuSSQ0NyfvYX7LPTCx6OS+ZayBNuEtXB3tLDobvejP6+eS3siFpRsfZrGT+WeyaM5h4uMVg4vn76M7lJTMNpJZJNAccPDzCWBo3npXK3oHwcKWCytD1UFY47whlut1VGtlXeJ6BgxVKKUfK1pRn4NoKpZTluqxgnoELOfHd5HxWMM/A5xUKKcuXWcE8A+9UKKQsmZqyDVz2Gn6pUk2frBnxRlYi00CsWBdmq9XUF7PRdikrkf9TouF5fFSVoj741G+ey0vmGoi2TcljdvdGumjEI3HWH3kF2z4somNVcgzrQ5dWzK8ajhW98IpeRqJjRXKf//ZLvY6j8YHlosJCA/RMhHvw1aDKdsCqEc1YtLST4h0ZgFjwjcvuFd4ur62AZNGfDkXbFztdsmMD9K7XA6Yxi9Svvm1IkhftMbX1z4BCTaUnthzBvHCgbI8ea8KTseCtMotLG4A06aBNrwtjJVt8LHk0OlbLaujrCG0l2r436rDwLLp9LE3CS37WGkQ8A+7AVYrGTUnmMVpQelF4IhacGsbcoRmA1HSThlO4PafkM5seiGU/DGvmQEdoK7HknBGTksWM9Iq9poYpniHvwD+kQ66xx0nc3wu9a9N0LPt92LMqMQDpiP02nEHXPnfHe9aqmlUZqeVoGvt3F2pqampqaobOX8UGtOavmkzUAAAAAElFTkSuQmCC\""],"sourceRoot":""}